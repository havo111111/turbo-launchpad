{"ast":null,"code":"import React,{useState,useEffect}from'react';import{ethers}from'ethers';import{useWeb3React}from'@web3-react/core';import{Button,Box,Typography,CircularProgress,LinearProgress}from'@mui/material';import{HyperEVMService}from'../services/hyperevm';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export const TokenBonding=_ref=>{let{tokenAddress}=_ref;const{account,library}=useWeb3React();const[bondingProgress,setBondingProgress]=useState(0);const[price,setPrice]=useState(0);const[loading,setLoading]=useState(false);const[error,setError]=useState('');const[success,setSuccess]=useState(false);useEffect(()=>{const fetchBondingData=async()=>{if(!library)return;try{const provider=new ethers.providers.Web3Provider(library);const hyperEVMService=new HyperEVMService();// Get token details\nconst token=await hyperEVMService.getCoinDetails(tokenAddress);if(!token)throw new Error('Token not found');// Calculate bonding progress\nconst targetSupply=710200000;// 710.2M tokens\nconst currentSupply=parseFloat(token.totalSupply);setBondingProgress(currentSupply/targetSupply*100);// Get current price\nconst tokenContract=new ethers.Contract(tokenAddress,['function price() view returns (uint256)'],provider);const price=await tokenContract.price();setPrice(Number(ethers.utils.formatEther(price)));}catch(err){setError(err.message);}};fetchBondingData();const interval=setInterval(fetchBondingData,30000);return()=>clearInterval(interval);},[library,tokenAddress]);const handleBuyTokens=async()=>{if(!account||!library){setError('Please connect your wallet first');return;}setLoading(true);setError('');setSuccess(false);try{const provider=new ethers.providers.Web3Provider(library);const signer=provider.getSigner();const bondingContract=new ethers.Contract(tokenAddress,['function buyTokens(uint256 amount) external payable'],signer);const amount=ethers.utils.parseEther('1');// Example: Buy 1 HYPE worth of tokens\nconst tx=await bondingContract.buyTokens(amount,{value:amount});await tx.wait();setSuccess(true);setError('');}catch(err){setError(err.message);}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(Box,{sx:{maxWidth:600,mx:'auto',p:3},children:[/*#__PURE__*/_jsx(Typography,{variant:\"h5\",component:\"h2\",gutterBottom:true,children:\"Token Bonding Progress\"}),/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:bondingProgress,sx:{mb:2}}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{mb:2},children:[\"Current Progress: \",bondingProgress.toFixed(2),\"%\"]}),/*#__PURE__*/_jsxs(Typography,{variant:\"body1\",sx:{mb:2},children:[\"Current Price: \",price.toFixed(6),\" HYPE\"]}),error&&/*#__PURE__*/_jsx(Typography,{color:\"error\",sx:{mt:2},children:error}),success&&/*#__PURE__*/_jsx(Typography,{color:\"success\",sx:{mt:2},children:\"Transaction successful!\"}),/*#__PURE__*/_jsx(Button,{variant:\"contained\",color:\"primary\",fullWidth:true,onClick:handleBuyTokens,disabled:loading||bondingProgress>=100,sx:{mt:2},children:loading?/*#__PURE__*/_jsx(CircularProgress,{size:24}):'Buy Tokens'})]});};","map":{"version":3,"names":["React","useState","useEffect","ethers","useWeb3React","Button","Box","Typography","CircularProgress","LinearProgress","HyperEVMService","jsx","_jsx","jsxs","_jsxs","TokenBonding","_ref","tokenAddress","account","library","bondingProgress","setBondingProgress","price","setPrice","loading","setLoading","error","setError","success","setSuccess","fetchBondingData","provider","providers","Web3Provider","hyperEVMService","token","getCoinDetails","Error","targetSupply","currentSupply","parseFloat","totalSupply","tokenContract","Contract","Number","utils","formatEther","err","message","interval","setInterval","clearInterval","handleBuyTokens","signer","getSigner","bondingContract","amount","parseEther","tx","buyTokens","value","wait","sx","maxWidth","mx","p","children","variant","component","gutterBottom","mb","toFixed","color","mt","fullWidth","onClick","disabled","size"],"sources":["/Users/admin/turbo-launchpad/src/components/TokenBonding.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { ethers } from 'ethers';\nimport { useWeb3React } from '@web3-react/core';\nimport { Button, Box, Typography, CircularProgress, LinearProgress } from '@mui/material';\nimport { HyperEVMService } from '../services/hyperevm';\n\ninterface TokenBondingProps {\n  tokenAddress: string;\n}\n\nexport const TokenBonding: React.FC<TokenBondingProps> = ({ tokenAddress }) => {\n  const { account, library } = useWeb3React();\n  const [bondingProgress, setBondingProgress] = useState(0);\n  const [price, setPrice] = useState(0);\n  const [loading, setLoading] = useState(false);\n  const [error, setError] = useState('');\n  const [success, setSuccess] = useState(false);\n\n  useEffect(() => {\n    const fetchBondingData = async () => {\n      if (!library) return;\n\n      try {\n        const provider = new ethers.providers.Web3Provider(library);\n        const hyperEVMService = new HyperEVMService();\n        \n        // Get token details\n        const token = await hyperEVMService.getCoinDetails(tokenAddress);\n        if (!token) throw new Error('Token not found');\n\n        // Calculate bonding progress\n        const targetSupply = 710200000; // 710.2M tokens\n        const currentSupply = parseFloat(token.totalSupply);\n        setBondingProgress((currentSupply / targetSupply) * 100);\n\n        // Get current price\n        const tokenContract = new ethers.Contract(\n          tokenAddress,\n          ['function price() view returns (uint256)'],\n          provider\n        );\n        const price = await tokenContract.price();\n        setPrice(Number(ethers.utils.formatEther(price)));\n      } catch (err: any) {\n        setError(err.message);\n      }\n    };\n\n    fetchBondingData();\n    const interval = setInterval(fetchBondingData, 30000);\n    return () => clearInterval(interval);\n  }, [library, tokenAddress]);\n\n  const handleBuyTokens = async () => {\n    if (!account || !library) {\n      setError('Please connect your wallet first');\n      return;\n    }\n\n    setLoading(true);\n    setError('');\n    setSuccess(false);\n\n    try {\n      const provider = new ethers.providers.Web3Provider(library);\n      const signer = provider.getSigner();\n      \n      const bondingContract = new ethers.Contract(\n        tokenAddress,\n        ['function buyTokens(uint256 amount) external payable'],\n        signer\n      );\n\n      const amount = ethers.utils.parseEther('1'); // Example: Buy 1 HYPE worth of tokens\n      const tx = await bondingContract.buyTokens(amount, { value: amount });\n      await tx.wait();\n\n      setSuccess(true);\n      setError('');\n    } catch (err: any) {\n      setError(err.message);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <Box sx={{ maxWidth: 600, mx: 'auto', p: 3 }}>\n      <Typography variant=\"h5\" component=\"h2\" gutterBottom>\n        Token Bonding Progress\n      </Typography>\n\n      <LinearProgress\n        variant=\"determinate\"\n        value={bondingProgress}\n        sx={{ mb: 2 }}\n      />\n\n      <Typography variant=\"body1\" sx={{ mb: 2 }}>\n        Current Progress: {bondingProgress.toFixed(2)}%\n      </Typography>\n\n      <Typography variant=\"body1\" sx={{ mb: 2 }}>\n        Current Price: {price.toFixed(6)} HYPE\n      </Typography>\n\n      {error && (\n        <Typography color=\"error\" sx={{ mt: 2 }}>\n          {error}\n        </Typography>\n      )}\n\n      {success && (\n        <Typography color=\"success\" sx={{ mt: 2 }}>\n          Transaction successful!\n        </Typography>\n      )}\n\n      <Button\n        variant=\"contained\"\n        color=\"primary\"\n        fullWidth\n        onClick={handleBuyTokens}\n        disabled={loading || bondingProgress >= 100}\n        sx={{ mt: 2 }}\n      >\n        {loading ? <CircularProgress size={24} /> : 'Buy Tokens'}\n      </Button>\n    </Box>\n  );\n};\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}